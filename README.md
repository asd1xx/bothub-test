# Телеграм-бот "Кошелёк"

## О проекте

Когда пользователь пишет боту в первый раз, в базу данных заносится его учётная запись с $0.00 на счёте. Если сообщение, которое пользователь отправляет боту, является числом, то соответствующая сумма в долларах начисляется ему на счёт. Если число отрицательное, то сумма наоборот списывается. В ответ пользователю приходит сообщение с остатком на его счёте. Пользователь может отправить число с отделением дробной части как точкой, так и запятой. На счету у пользователя не может быть отрицательной суммы. Если пользователь пытается списать больше, чем у него есть, то в ответ получит сообщение об ошибке.

## Системные требования

- Composer 2.6.6
- PHP 8.3
- PostgreSQL 12.20

## Инструкция по установке

Выполните следующие действия последовательно:

1. Клонируйте репозиторий:
    
    ```bash
    git@github.com:asd1xx/bothub-test.git bot-wallet
    ```
    
2. Перейдите в папку с проектом:
    
    ```bash
    cd bot-wallet
    ```
    
3. Установите зависимости:
    
    ```bash
    make install
    ```
    
4. Настройте соединение с базой данных:
    
    переименуйте файл .env.example в .env и установите значение переменной DATABASE_URL

5. Выполните инструкции из файла:
    
    ```bash
    psql -f database.sql
    ```

6. Создайте бота в телеграм:
    
    получите токен и укажите в файле public/index.php в строке const TOKEN = 'YOUR TOKEN';

7. После деплоя сообщите боту информацию:
    
    в браузере вставляем строку:
    https://api.telegram.org/botТОКЕН/setWebhook?url=САЙТ  
    ТОКЕН замените на токен бота  
    САЙТ замените на ваш адрес

    Если все сделали правильно, то получите примерно такой ответ:
    {"ok":true,"result":true,"description":"Webhook was set"}